<project name="cutplace" default="bdist" basedir=".">
    <description>Buildfile for cutplace</description>

    <!-- Set global properties for this build. -->
    <property name="source" location="source" />
    <property name="build" location="build" />
    <property name="dist" location="dist" />
    <property name="test_all.py" location="${source}/cutplace/test_all.py" />

    <target name="bdist" depends="version" description="build binary distribution">
        <tstamp />
        <exec executable="python">
            <arg value="setup.py" />
            <arg value="bdist" />
        </exec>
    </target>

    <target name="test" depends="version" description="run test suite">
        <exec executable="python">
            <arg value="${test_all.py}" />
        </exec>
    </target>

    <target name="clean" description="clean up">
        <!-- Delete files and folders generated by target "bdist". -->
        <delete dir="${build}" />
        <delete dir="${dist}" />
        <delete dir="${source}" includes="**/*.pyc" />
    </target>

    <target description="update version information" name="version">
        <xslt in="version.xml" out="${source}/cutplace/version.py" style="${source}/xml/version-py.xsl" />
        <xslt in="version.xml" out="setup.py" style="${source}/xml/version-setup-py.xsl" />
    </target>
</project>
